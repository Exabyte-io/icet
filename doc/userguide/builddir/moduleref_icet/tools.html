

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tools &mdash; icet  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/logo.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/table_styling.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mchammer" href="../moduleref_mchammer/index.html" />
    <link rel="prev" title="Cluster expansions" href="cluster_expansion.html" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@MagicMaterials" />
    <meta name="twitter:image" content="https://icet.materialsmodeling.org/_static/logo-small.png" />
    <meta property="og:title" content="icet" />
    <meta property="og:description" content="A Pythonic approach to cluster expansions." />
    <meta property="og:image" content="https://icet.materialsmodeling.org/_static/logo-2x1.png" />


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> icet
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Main</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/index.html">Basic tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced topics</a></li>
</ul>
<p class="caption"><span class="caption-text">Function reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><strong class="program">icet</strong></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cluster_space.html">Cluster space</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_container.html">Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimizers.html">Optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_expansion.html">Cluster expansions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-icet.tools.convex_hull">Convex hull construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-icet.tools.structure_mapping">Mapping structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-icet.tools.structure_enumeration">Structure enumeration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../moduleref_mchammer/index.html"><strong class="program">mchammer</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreref/index.html">Core components</a></li>
</ul>
<p class="caption"><span class="caption-text">Backmatter</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">icet</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div style="text-align: right;">
<a href="https://gitlab.com/materials-modeling/icet" target="_blank">gitlab/icet</a>
| <a href="https://materialsmodeling.org/software" target="_blank">materialsmodeling.org/software</a>
| <a href=../genindex.html>index</a>
| <a href=../py-modindex.html>modules</a>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tools">
<span id="index-0"></span><h1>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-icet.tools.convex_hull">
<span id="convex-hull-construction"></span><span id="index-1"></span><h2>Convex hull construction<a class="headerlink" href="#module-icet.tools.convex_hull" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="icet.tools.convex_hull.ConvexHull">
<em class="property">class </em><code class="descclassname">icet.tools.convex_hull.</code><code class="descname">ConvexHull</code><span class="sig-paren">(</span><em>concentrations</em>, <em>energies</em><span class="sig-paren">)</span><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull" title="Permalink to this definition">¶</a></dt>
<dd><p>This class provides functionality for extracting the convex hull
of the (free) energy of mixing. It is based on the <a class="reference external" href="http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.spatial.ConvexHull.html">convex hull
calculator in SciPy</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>concentrations</strong> (<em>list of floats / list of lists of floats</em>) – concentrations for each structure listed as <code class="docutils literal"><span class="pre">[[c1,</span> <span class="pre">c2],</span> <span class="pre">[c1,</span> <span class="pre">c2],</span>
<span class="pre">...]</span></code>; for binaries, in which case there is only one independent
concentration, the format <code class="docutils literal"><span class="pre">[c1,</span> <span class="pre">c2,</span> <span class="pre">c3,</span> <span class="pre">...]</span></code> works as well.</li>
<li><strong>energies</strong> (<em>list of floats</em>) – energy (or energy of mixing) for each structure</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="icet.tools.convex_hull.ConvexHull.concentrations">
<code class="descname">concentrations</code><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull.concentrations" title="Permalink to this definition">¶</a></dt>
<dd><p><em>NumPy array (N, dimensions)</em> – concentrations of the <cite>N</cite> structures on the convex hull</p>
</dd></dl>

<dl class="attribute">
<dt id="icet.tools.convex_hull.ConvexHull.energies">
<code class="descname">energies</code><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull.energies" title="Permalink to this definition">¶</a></dt>
<dd><p><em>NumPy array</em> – energies of the <cite>N</cite> structures on the convex hull</p>
</dd></dl>

<dl class="attribute">
<dt id="icet.tools.convex_hull.ConvexHull.dimensions">
<code class="descname">dimensions</code><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull.dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – number of independent concentrations needed to specify a point in
concentration space (1 for binaries, 2 for ternaries etc.)</p>
</dd></dl>

<dl class="attribute">
<dt id="icet.tools.convex_hull.ConvexHull.structures">
<code class="descname">structures</code><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull.structures" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list of int</em> – indices of structures that constitute the convex hull (indices are
defined by the order of their concentrations and energies are fed when
initializing the ConvexHull object)</p>
</dd></dl>

<p class="rubric">Examples</p>
<p>A <cite>ConvexHull</cite> object is easily initialized by providing lists of
concentrations and energies:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hull</span> <span class="o">=</span> <span class="n">ConvexHull</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;concentration&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mixing_energy&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>after which one can for example plot the data (assuming a
matplotlib axis object <code class="docutils literal"><span class="pre">ax</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hull</span><span class="o">.</span><span class="n">concentrations</span><span class="p">,</span> <span class="n">hull</span><span class="o">.</span><span class="n">energies</span><span class="p">)</span>
</pre></div>
</div>
<p>or extract structures at or close to the convex hull:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">low_energy_structures</span> <span class="o">=</span> <span class="n">hull</span><span class="o">.</span><span class="n">extract_low_energy_structures</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;concentration&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mixing_energy&#39;</span><span class="p">],</span>
    <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">structures</span><span class="o">=</span><span class="n">list_of_structures</span><span class="p">)</span>
</pre></div>
</div>
<p>A complete example can be found in the <a class="reference internal" href="../basic/enumerate_structures.html#tutorial-enumerate-structures"><span class="std std-ref">basic tutorial</span></a>.</p>
<dl class="method">
<dt id="icet.tools.convex_hull.ConvexHull.extract_low_energy_structures">
<code class="descname">extract_low_energy_structures</code><span class="sig-paren">(</span><em>concentrations</em>, <em>energies</em>, <em>energy_tolerance</em>, <em>structures=None</em><span class="sig-paren">)</span><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull.extract_low_energy_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns structures that lie within a certain tolerance of the convex
hull.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>concentrations</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Union" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>], <a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>]]]) – <p>concentrations of candidate structures</p>
<p>If there is one independent concentration, a list of
floats is sufficient. Otherwise, the concentrations must
be provided as a list of lists, such as <code class="docutils literal"><span class="pre">[[0.1,</span> <span class="pre">0.2],</span>
<span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">...]</span></code>.</p>
</li>
<li><strong>energies</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>]) – energies of candidate structures</li>
<li><strong>energy_tolerance</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>) – include structures with an energy that is at most this far
from the convex hull</li>
<li><strong>structures</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Optional" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#list" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a>]) – <p>list of candidate structures, e.g., <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/ase/atoms.html#ase.Atoms" title="(in ASE v)"><code class="xref py py-class docutils literal"><span class="pre">ASE</span> <span class="pre">Atoms</span></code></a> objects, corresponding to <code class="docutils literal"><span class="pre">concentrations</span></code>
and <code class="docutils literal"><span class="pre">energies</span></code></p>
<p>The list will be returned, but with the objects too
far from the convex hull removed. If <cite>None</cite>, a list of
indices is returned instead.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="icet.tools.convex_hull.ConvexHull.get_energy_at_convex_hull">
<code class="descname">get_energy_at_convex_hull</code><span class="sig-paren">(</span><em>target_concentrations</em><span class="sig-paren">)</span><a class="headerlink" href="#icet.tools.convex_hull.ConvexHull.get_energy_at_convex_hull" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the energy of the convex hull at specified concentrations.
If any concentration is outside the allowed range, NaN is
returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>target_concentrations</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Union" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>], <a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>]]]) – <p>concentrations at target points</p>
<p>If there is one independent concentration, a list of
floats is sufficient. Otherwise, the concentrations ought
to be provided as a list of lists, such as <code class="docutils literal"><span class="pre">[[0.1,</span> <span class="pre">0.2],</span>
<span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">...]</span></code>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">ndarray</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-icet.tools.structure_mapping">
<span id="mapping-structures"></span><span id="index-2"></span><h2>Mapping structures<a class="headerlink" href="#module-icet.tools.structure_mapping" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="icet.tools.structure_mapping.map_structure_to_reference">
<code class="descclassname">icet.tools.structure_mapping.</code><code class="descname">map_structure_to_reference</code><span class="sig-paren">(</span><em>input_structure</em>, <em>reference_structure</em>, <em>tolerance_mapping</em>, <em>vacancy_type=None</em>, <em>inert_species=None</em>, <em>tolerance_cell=0.05</em>, <em>tolerance_positions=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#icet.tools.structure_mapping.map_structure_to_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a relaxed structure onto a reference structure.
The function returns a tuple comprising</p>
<ul class="simple">
<li>the ideal supercell most closely matching the input structure,</li>
<li>the largest deviation of any input coordinate from its ideal
coordinate, and</li>
<li>the average deviation of the input coordinates from the ideal
coordinates.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>input_structure</strong> (<code class="xref py py-class docutils literal"><span class="pre">Atoms</span></code>) – relaxed input structure</li>
<li><strong>reference_structure</strong> (<code class="xref py py-class docutils literal"><span class="pre">Atoms</span></code>) – reference structure, which can but need not represent the primitive
cell</li>
<li><strong>tolerance_mapping</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>) – <p>maximum allowed displacement for mapping an atom in the relaxed (but
rescaled) structure to the reference supercell</p>
<p><em>Note</em>: A reasonable choice is up to 20-30% of the first
nearest neighbor distance (<cite>r1</cite>).  A value above 50% of <cite>r1</cite>
will most likely lead to atoms being multiply assigned,
whereby the mapping fails.</p>
</li>
<li><strong>vacancy_type</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Optional" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>]) – <p>If this parameter is set to a non-zero string unassigned sites in the
reference structure will be assigned to this type.</p>
<p><em>Note 1</em>: By default (<code class="docutils literal"><span class="pre">None</span></code>) the method will fail if there
are <em>any</em> unassigned sites in the reference structure.</p>
<p><em>Note 2</em>: <code class="docutils literal"><span class="pre">vacancy_type</span></code> must be a valid element type as
enforced by the <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/ase/atoms.html#ase.Atoms" title="(in ASE v)"><code class="xref py py-class docutils literal"><span class="pre">ase.Atoms</span></code></a> class.</p>
</li>
<li><strong>inert_species</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Optional" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>]]) – List of chemical symbols (e.g., <code class="docutils literal"><span class="pre">['Au',</span> <span class="pre">'Pd']</span></code>) that are never
substituted for a vacancy. Used to make an initial rescale of the cell
and thus increases the probability for a successful mapping. Need not
be specified if <code class="docutils literal"><span class="pre">vacancy_type</span></code> is <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>tolerance_cell</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>) – tolerance factor applied when computing permutation matrix to generate
supercell</li>
<li><strong>tolerance_positions</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>) – tolerance factor applied when scanning for overlapping positions in
Angstrom (forwarded to <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/ase/build/tools.html#ase.build.cut" title="(in ASE v)"><code class="xref py py-func docutils literal"><span class="pre">ase.build.cut()</span></code></a>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>The following code snippet illustrates the general usage. It first creates
a primitive FCC cell, which is latter used as reference structure. To
emulate a relaxed structure obtained from, e.g., a density functional
theory calculation, the code then creates a 4x4x4 conventional FCC
supercell, which is populated with two different atom types, has distorted
cell vectors, and random displacements to the atoms. Finally, the present
function is used to map the structure back the ideal lattice:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase.build</span> <span class="k">import</span> <span class="n">bulk</span>
<span class="n">reference</span> <span class="o">=</span> <span class="n">bulk</span><span class="p">(</span><span class="s1">&#39;Au&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">4.09</span><span class="p">)</span>
<span class="n">atoms</span> <span class="o">=</span> <span class="n">bulk</span><span class="p">(</span><span class="s1">&#39;Au&#39;</span><span class="p">,</span> <span class="n">cubic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">4.09</span><span class="p">)</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">atoms</span><span class="o">.</span><span class="n">set_chemical_symbols</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="p">[</span><span class="s1">&#39;Ag&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">atoms</span><span class="p">)</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="p">[</span><span class="s1">&#39;Au&#39;</span><span class="p">])</span>
<span class="n">atoms</span><span class="o">.</span><span class="n">set_cell</span><span class="p">(</span><span class="n">atoms</span><span class="o">.</span><span class="n">cell</span> <span class="o">*</span> <span class="mf">1.02</span><span class="p">,</span> <span class="n">scale_atoms</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">atoms</span><span class="o">.</span><span class="n">rattle</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">mapped_atoms</span> <span class="o">=</span> <span class="n">map_structure_to_reference</span><span class="p">(</span><span class="n">atoms</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal"><span class="pre">Atoms</span></code>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="structure-enumeration"></span></div>
<div class="section" id="module-icet.tools.structure_enumeration">
<span id="id1"></span><span id="index-3"></span><h2>Structure enumeration<a class="headerlink" href="#module-icet.tools.structure_enumeration" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="icet.tools.structure_enumeration.enumerate_structures">
<code class="descclassname">icet.tools.structure_enumeration.</code><code class="descname">enumerate_structures</code><span class="sig-paren">(</span><em>atoms</em>, <em>sizes</em>, <em>species</em>, <em>concentration_restrictions=None</em>, <em>niggli_reduce=None</em><span class="sig-paren">)</span><a class="headerlink" href="#icet.tools.structure_enumeration.enumerate_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a sequence of enumerated structures. The function generates
<em>all</em> inequivalent structures that are permissible given a certain
lattice. Using the <code class="docutils literal"><span class="pre">species</span></code> and <code class="docutils literal"><span class="pre">concentration_restrictions</span></code>
keyword arguments it is possible to specify which species are to
be included on which site and in which concentration range.</p>
<p>The function is sensitive to the boundary conditions of the input
structure. An enumeration of, for example, a surface can thus be performed
by setting <code class="docutils literal"><span class="pre">atoms.pbc</span> <span class="pre">=</span> <span class="pre">[True,</span> <span class="pre">True,</span> <span class="pre">False]</span></code>.</p>
<p>The algorithm implemented here was developed by Gus L. W. Hart and
Rodney W. Forcade in Phys. Rev. B <strong>77</strong>, 224115 (2008)
<a class="reference internal" href="../bibliography.html#harfor08" id="id2">[HarFor08]</a> and Phys. Rev. B <strong>80</strong>, 014120 (2009) <a class="reference internal" href="../bibliography.html#harfor09" id="id3">[HarFor09]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>atoms</strong> (<code class="xref py py-class docutils literal"><span class="pre">Atoms</span></code>) – primitive structure from which derivative superstructures should be
generated</li>
<li><strong>sizes</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.List" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#int" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a>]) – number of sites (included in the enumeration)</li>
<li><strong>species</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#list" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a>) – species with which to decorate the structure, e.g., <code class="docutils literal"><span class="pre">['Au',</span>
<span class="pre">'Ag']</span></code>; see below for more examples</li>
<li><strong>concentration_restrictions</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Optional" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a>]) – allowed concentration range for one or more element in
species, e.g., <code class="docutils literal"><span class="pre">{'Au':</span> <span class="pre">(0,</span> <span class="pre">0.2)}</span></code> will only enumerate structures
in which the Au content is between 0 and 20 %; here, concentration is
always defined as the number of atoms of the specified kind divided by
the number of <em>all</em> atoms.</li>
<li><strong>niggli_reduction</strong> – if True perform a Niggli reduction with spglib for each structure;
the default is <code class="docutils literal"><span class="pre">True</span></code> if <code class="docutils literal"><span class="pre">atoms</span></code> is periodic in all directions,
<code class="docutils literal"><span class="pre">False</span></code> otherwise.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>The following code snippet illustrates how to enumerate structures
with up to 6 atoms in the unit cell for a binary alloy without any
constraints:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase.build</span> <span class="k">import</span> <span class="n">bulk</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">bulk</span><span class="p">(</span><span class="s1">&#39;Ag&#39;</span><span class="p">)</span>
<span class="n">enumerate_structures</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">prim</span><span class="p">,</span> <span class="n">sizes</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                     <span class="n">species</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Ag&#39;</span><span class="p">,</span> <span class="s1">&#39;Au&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>To limit the concentration range to 10 to 40% Au the code should
be modified as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">enumerate_structures</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">prim</span><span class="p">,</span> <span class="n">sizes</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                     <span class="n">species</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Ag&#39;</span><span class="p">,</span> <span class="s1">&#39;Au&#39;</span><span class="p">],</span>
                     <span class="n">concentration_restrictions</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Au&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)})</span>
</pre></div>
</div>
<p>Often one would like to consider mixing on only one
sublattice. This can be achieved as illustrated for a
Ga(1-x)Al(x)As alloy as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">prim</span> <span class="o">=</span> <span class="n">bulk</span><span class="p">(</span><span class="s1">&#39;GaAs&#39;</span><span class="p">,</span> <span class="n">crystalstructure</span><span class="o">=</span><span class="s1">&#39;zincblende&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">5.65</span><span class="p">)</span>
<span class="n">enumerate_structures</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">prim</span><span class="p">,</span> <span class="n">sizes</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
                     <span class="n">species</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Ga&#39;</span><span class="p">,</span> <span class="s1">&#39;Al&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;As&#39;</span><span class="p">]])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">Atoms</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="icet.tools.structure_enumeration.get_symmetry_operations">
<code class="descclassname">icet.tools.structure_enumeration.</code><code class="descname">get_symmetry_operations</code><span class="sig-paren">(</span><em>atoms</em>, <em>tolerance=0.001</em><span class="sig-paren">)</span><a class="headerlink" href="#icet.tools.structure_enumeration.get_symmetry_operations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns symmetry operations permissable for a given structure as
obtained via <a class="reference external" href="https://atztogo.github.io/spglib/">spglib</a>. The
symmetry operations consist of three parts: rotation, translation
and basis shifts. The latter define the way that sublattices
shift upon rotation (correponds to <cite>d_Nd</cite> in <a class="reference internal" href="../bibliography.html#harfor09" id="id4">[HarFor09]</a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>atoms</strong> (<code class="xref py py-class docutils literal"><span class="pre">Atoms</span></code>) – structure for which symmetry operations are sought</li>
<li><strong>tolerance</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a>) – numerical tolerance imposed during symmetry analysis</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Dict" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#list" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../moduleref_mchammer/index.html" class="btn btn-neutral float-right" title="mchammer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cluster_expansion.html" class="btn btn-neutral" title="Cluster expansions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book">Related software</span>
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        
          <dd><a href="https://atomicrex.org/">atomicrex<br>
            <div style="text-indent:1em; font-size:small; color:gray">interatomic potential construction</div>
          </a></dd>
        
          <dd><a href="https://dynasor.materialsmodeling.org/">dynasor<br>
            <div style="text-indent:1em; font-size:small; color:gray">dynamical structure factors from MD</div>
          </a></dd>
        
          <dd><a href="https://hiphive.materialsmodeling.org/">hiphive<br>
            <div style="text-indent:1em; font-size:small; color:gray">anharmonic force constant potentials</div>
          </a></dd>
        
          <dd><a href="https://icet.materialsmodeling.org/">icet<br>
            <div style="text-indent:1em; font-size:small; color:gray">cluster expansions</div>
          </a></dd>
        
          <dd><a href="https://libvdwxc.org/">libvdwxc<br>
            <div style="text-indent:1em; font-size:small; color:gray">library for van-der-Waals functionals</div>
          </a></dd>
        
          <dd><a href="https://storq.materialsmodeling.org/">storq<br>
            <div style="text-indent:1em; font-size:small; color:gray">high-throughput submission system</div>
          </a></dd>
        
          <dd><a href="https://vcsgc-lammps.materialsmodeling.org/">vcsgc-lammps<br>
            <div style="text-indent:1em; font-size:small; color:gray">Monte Carlo simulations with lammps</div>
          </a></dd>
        
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>